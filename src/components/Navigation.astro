---
import { Menu, X } from 'lucide-astro';
import { NAV_LINKS, CTA_BUTTON } from '../constants/navigation';
---

<nav class="relative w-full z-50 pt-6 px-4 sm:px-6 lg:px-8">
  <div class="max-w-7xl mx-auto">
    <div class="bg-black/40 backdrop-blur-md rounded-full px-6 py-3.5 flex justify-between items-center">
      <div class="flex items-center">
        <a href="/">
          <img src="/images/logos/ridenote-logo-primary-light.png" alt="Ridenote" class="h-6 md:h-7" />
        </a>
      </div>

      <div class="hidden md:flex items-center space-x-8 absolute left-1/2 transform -translate-x-1/2">
        {NAV_LINKS.map(link => (
          <a href={link.href} class="text-white/90 hover:text-white transition-colors text-sm font-medium">
            {link.label}
          </a>
        ))}
      </div>

      <div class="hidden md:flex items-center">
        <a href={CTA_BUTTON.href} class="bg-lime-400 text-black px-6 py-2.5 rounded-full hover:bg-lime-500 transition-colors font-semibold text-sm">
          {CTA_BUTTON.label}
        </a>
      </div>

      <button
        class="md:hidden mobile-menu-button text-white"
        aria-label="Toggle navigation menu"
        aria-controls="mobile-menu"
      >
        <Menu class="w-6 h-6 menu-icon" />
        <X class="w-6 h-6 close-icon hidden" />
      </button>
    </div>
  </div>

  <div class="md:hidden mt-2 mobile-menu hidden" id="mobile-menu">
    <div class="bg-black/40 backdrop-blur-md rounded-3xl px-6 py-4 space-y-3">
      {NAV_LINKS.map(link => (
        <a href={link.href} class="block py-2 text-white/90 font-medium mobile-menu-link">
          {link.label}
        </a>
      ))}
      <div class="pt-4">
        <a href={CTA_BUTTON.href} class="block w-full bg-lime-400 text-black py-2.5 rounded-full font-semibold text-center mobile-menu-link">
          {CTA_BUTTON.label}
        </a>
      </div>
    </div>
  </div>
</nav>

<script>
  import { initializeMobileMenu } from '../utils/mobile-menu';
  import { setupAnchorLinks } from '../utils/scroll-navigation';

  document.addEventListener('DOMContentLoaded', () => {
    initializeMobileMenu();
    setupAnchorLinks();
  });
</script>
